{"version":3,"sources":["webpack:///webpack/bootstrap 1b5df14ac0585077df2e","webpack:///external \"express\"","webpack:///external \"mongoose\"","webpack:///./server/config/default.js","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///./server/app.js","webpack:///external \"cookie-parser\"","webpack:///external \"body-parser\"","webpack:///external \"connect-history-api-fallback\"","webpack:///external \"chalk\"","webpack:///./server/api/index.js","webpack:///./server/api/users/routes.js","webpack:///./server/api/users/controllers.js","webpack:///external \"bcryptjs\"","webpack:///external \"jsonwebtoken\"","webpack:///./server/utils/index.js","webpack:///external \"crypto\"","webpack:///./server/api/users/models.js","webpack:///./server/api/products/routes.js","webpack:///./server/api/products/controllers.js","webpack:///./server/api/products/models.js","webpack:///./node_modules/time-formater/index.js","webpack:///./node_modules/time-formater/timeformater.js","webpack:///./server/utils/ids.js","webpack:///./server/api/admin/index.js","webpack:///./server/api/admin/users/routes.js","webpack:///./server/api/admin/users/controllers.js","webpack:///./server/api/admin/users/models.js"],"names":["port","mongodbUrl","tokenSecret","mongoose","connect","config","Promise","global","db","connection","once","console","log","chalk","green","on","err","red","disconnect","server","auto_reconnect","app","express","all","req","res","next","header","headers","origin","method","sendStatus","use","json","urlencoded","extended","limit","cookieParser","listen","router","Router","post","index","logIn","logOut","body","username","password1","password2","bcrypt","hash","password","getId","id","createAt","dtime","format","newUser","save","savedUser","status","message","error","User","findOne","user","passwordHash","compare","matched","randId","crypto","randomBytes","toString","userSchema","Schema","Number","type","String","unique","require","minlength","model","get","products","category","params","tag","lists","recommends","picUrl","desc","price","productsSchema","pic_url","Products","types","idsSchema","user_id","Ids","data","Error","newIds","includes","register","newPassword","Admin","count","getUserCounts","query","offset","find","sort","skip","users","getUserLists","adminSchema","avatar"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1b5df14ac0585077df2e","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","\nexport default {\n  port: 9001,\n  mongodbUrl: 'mongodb://localhost:27017/shopping',\n  tokenSecret: 'SHOPPING'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/default.js","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/asyncToGenerator\"\n// module id = 4\n// module chunks = 0","import express from 'express';\nimport cookieParser from 'cookie-parser';\nimport { urlencoded, json } from 'body-parser';\nimport history from 'connect-history-api-fallback';\nimport mongoose from 'mongoose';\nimport chalk from 'chalk';\nimport config from './config/default';\nimport apiRoutes from './api/index';\n\n// connect mongodb\nmongoose.connect(config.mongodbUrl);\nmongoose.Promise = global.Promise;\nconst db = mongoose.connection;\ndb.once('open', () => {\n  console.log(chalk.green('数据库连接成功!'));\n});\n\ndb.on('error', (err) => {\n  console.log(chalk.red('数据连接出错: ' + err));\n  mongoose.disconnect();\n});\n\ndb.on('close', () => {\n  console.log(chalk.red('数据库断开, 重新连接数据库'));\n  mongoose.connect(config.mongodbUrl, {server: { auto_reconnect: true }});\n});\n\nconst app = express();\n\napp.all('*', (req, res, next) => {\n  res.header('Access-Control-Allow-Origin', req.headers.origin || '*');\n  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With');\n  res.header('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS');\n  res.header('Access-Control-Allow-Credentials', true); // 可以带cookies\n  res.header('X-Powered-By', '3.2.1');\n  if (req.method === 'OPTIONS') {\n    res.sendStatus(200);\n  } else {\n    next();\n  };\n});\n\napp.use(json());\napp.use(urlencoded({extended: false, limit: '50mb'}));\napp.use(cookieParser());\n\n// Import API Routes\napp.use('/api', apiRoutes);\napp.use(history);\napp.listen(config.port, () => {\n  console.log('Server is listening on port ' + config.port);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./server/app.js","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"connect-history-api-fallback\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-history-api-fallback\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 9\n// module chunks = 0","import { Router } from 'express';\nimport userRoutes from './users/routes';\nimport productsRoutes from './products/routes';\nimport adminRoutes from './admin/index';\n\nconst router = Router();\n\nrouter.use('/users', userRoutes);\nrouter.use('/products', productsRoutes);\n\nrouter.use('/admin', adminRoutes);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","import { Router } from 'express';\nimport { index, logIn, logOut } from './controllers';\n\nconst router = Router();\n\nrouter.post('/', index.post);\nrouter.post('/log-in', logIn.post);\nrouter.post('/log-out', logOut.post);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users/routes.js","import bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\nimport dtime from 'time-formater';\nimport { randId } from '../../utils/index';\nimport User from './models';\nimport { getId } from '../../utils/ids';\nimport config from '../../config/default';\n\nexport const index = {\n  async post (req, res) {\n    try {\n      let { username, password1, password2 } = req.body;\n      if (password1 === password2) {\n        let password = await bcrypt.hash(password1, 10);\n        let id = await getId('user_id');\n        let createAt = dtime().format('YYYY-MM-DD HH:mm');\n        let newUser = new User({ id, username, password, createAt });\n        let savedUser = await newUser.save();\n        console.log('用户注册成功');\n        res.status(200).json({\n          message: `Thanks for signing up, ${savedUser.username}!`\n        });\n      } else {\n        console.error('用户密码不匹配');\n        res.status(400).json({\n          message: '密码不匹配'\n        });\n      }\n    } catch (error) {\n      console.error('用户注册失败');\n      res.status(400).json({\n        message: '注册失败'\n      });\n    }\n  }\n};\n\nexport const logIn = {\n  async post (req, res) {\n    try {\n      let { username, password } = req.body;\n      let user = await User.findOne({ username });\n      console.log(user);\n      if (user) {\n        let passwordHash = user.password;\n        let matched = await bcrypt.compare(password, passwordHash);\n        if (matched) {\n          res.status(200).json({\n            message: '登录成功',\n            user\n          });\n        } else {\n          res.status(401).json({\n            message: '用户名或者密码不正确'\n          });\n        }\n      } else {\n        res.status(401).json({\n          message: '用户名不存在'\n        });\n      }\n    } catch (error) {\n      console.error('用户登录失败');\n      res.status(400).json({\n        message: '登录失败'\n      });\n    }\n  }\n};\n\nexport const logOut = {\n  async post (req, res) {\n    try {\n      res.status(200).json({\n        message: 'Sign out successful. Good bye! :)'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users/controllers.js","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 14\n// module chunks = 0","import crypto from 'crypto';\n\nexport const randId = (method = 'base64') => crypto.randomBytes(64).toString(method);\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/index.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 16\n// module chunks = 0","import mongoose from 'mongoose';\n\nconst userSchema = new mongoose.Schema({\n  id: Number,\n  username: {\n    type: String,\n    unique: true,\n    require: true,\n    minlength: 3\n  },\n  password: {\n    type: String,\n    require: true,\n    minlength: 6\n  },\n  createAt: String\n});\n\nconst User = mongoose.model('User', userSchema);\n\nexport default User;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users/models.js","import { Router } from 'express';\nimport { products } from './controllers';\n\nconst router = Router();\n\nrouter.get('/:tag', products.get);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/products/routes.js","import Products from './models';\n\nexport const products = {\n  async get (req, res) {\n    try {\n      const category = req.params.tag;\n      if (category === 'recommends') {\n        res.json({\n          lists: recommends\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n};\n\nvar recommends = [\n  {\n    id: 1,\n    picUrl: 'http://p4zxobaq9.bkt.clouddn.com/mac.jpg',\n    desc: 'Apple/苹果 21.5 英寸 iMac 2.3GHz 处理器 1TB 存储容量',\n    price: 8688,\n    tag: 'appliances'\n  },\n  {\n    id: 1,\n    picUrl: 'http://p4zxobaq9.bkt.clouddn.com/mac.jpg',\n    desc: 'Apple/苹果 21.5 英寸 iMac 2.3GHz 处理器 1TB 存储容量',\n    price: 8688,\n    tag: 'appliances'\n  },\n  {\n    id: 1,\n    picUrl: 'http://p4zxobaq9.bkt.clouddn.com/mac.jpg',\n    desc: 'Apple/苹果 21.5 英寸 iMac 2.3GHz 处理器 1TB 存储容量',\n    price: 8688,\n    tag: 'appliances'\n  },\n  {\n    id: 1,\n    picUrl: 'http://p4zxobaq9.bkt.clouddn.com/mac.jpg',\n    desc: 'Apple/苹果 21.5 英寸 iMac 2.3GHz 处理器 1TB 存储容量',\n    price: 8688,\n    tag: 'appliances'\n  },\n  {\n    id: 1,\n    picUrl: 'http://p4zxobaq9.bkt.clouddn.com/mac.jpg',\n    desc: 'Apple/苹果 21.5 英寸 iMac 2.3GHz 处理器 1TB 存储容量',\n    price: 8688,\n    tag: 'appliances'\n  },\n  {\n    id: 1,\n    picUrl: 'http://p4zxobaq9.bkt.clouddn.com/mac.jpg',\n    desc: 'Apple/苹果 21.5 英寸 iMac 2.3GHz 处理器 1TB 存储容量',\n    price: 8688,\n    tag: 'appliances'\n  }\n];\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/products/controllers.js","import mongoose from 'mongoose';\n\nconst productsSchema = new mongoose.Schema({\n  id: Number,\n  pic_url: String,\n  desc: String,\n  price: Number,\n  tag: String\n});\n\nconst Products = mongoose.model('Products', productsSchema);\n\nexport default Products;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/products/models.js","module.exports = require('./timeformater');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/time-formater/index.js\n// module id = 24\n// module chunks = 0","\r\nvar TimeFormater = function (input) {\r\n  return new TimeFormater.fn.init(input);\r\n}\r\n\r\nTimeFormater.fn = TimeFormater.prototype = {\r\n  constructor: TimeFormater,\r\n  init: function (input) {\r\n    if (typeof input == 'string' || typeof input == 'number') {\r\n      this[0] = new Date(input);\r\n    } else if (input instanceof Date) {\r\n      this[0] = input;\r\n    } else {\r\n      this[0] = new Date();\r\n    }\r\n    return this;\r\n  },\r\n  format: function (str) {\r\n    var that = this;\r\n    if (typeof str === 'string') {\r\n      return str.replace(/Y{4}|M{1,4}|Do|D{1,2}|d{1,4}|Q|H{1,2}|h{1,2}|m{1,2}|s{1,2}|S{1,3}|A|a|x|X/g, function (match) {\r\n        return that[match] ? that[match]() : match;\r\n      });\r\n    } else {\r\n      return that.toLocaleString();\r\n    }\r\n  },\r\n  fromNow: function () {\r\n    var oldTime = this[0].getTime();\r\n    var newTime = Date.now();\r\n    var diff = parseInt(newTime - oldTime);\r\n    if (diff < 10000) {\r\n      return '刚刚';\r\n    } else if (diff < 60000) {\r\n      return parseInt(diff / 1000) + '秒前';\r\n    } else if (diff < 3600000) {\r\n      return parseInt(diff / 60000) + '分钟前';\r\n    } else if (diff < 86400000) {\r\n      return parseInt(diff / 3600000) + '小时前';\r\n    } else if (diff < 2592000000) {\r\n      return parseInt(diff / 86400000) + '天前';\r\n    } else if (diff < 31104000000) {\r\n      return parseInt(diff / 2592000000) + '月前';\r\n    } else {\r\n      return parseInt(diff / 31104000000) + '年前';\r\n    }\r\n  },\r\n  toDouble: function (num) {\r\n    return num < 10 ? '0' + num : num;\r\n  },\r\n  YYYY: function () {\r\n    return this[0].getFullYear();\r\n  },\r\n  Q: function () {\r\n    return Math.ceil(this.M() / 3);\r\n  },\r\n  M: function () {\r\n    return this[0].getMonth() + 1;\r\n  },\r\n  MM: function () {\r\n    return this.toDouble(this.M());\r\n  },\r\n  MMM: function () {\r\n    return this.M() + '月';\r\n  },\r\n  MMMM: function () {\r\n    var str = '一,二,三,四,五,六,七,八,九,十,十一,十二';\r\n    return str.split(',')[this.M() - 1] + '月';\r\n  },\r\n  D: function () {\r\n    return this[0].getDate();\r\n  },\r\n  Do: function () {\r\n    return this.D() + '日';\r\n  },\r\n  DD: function () {\r\n    return this.toDouble(this.D());\r\n  },\r\n  d: function () {\r\n    return this[0].getDay();\r\n  },\r\n  dd: function () {\r\n    var str = '日一二三四五六';\r\n    return str[this.d()];\r\n  },\r\n  ddd: function () {\r\n    return '周' + this.dd();\r\n  },\r\n  dddd: function () {\r\n    return '星期' + this.dd();\r\n  },\r\n  H: function () {\r\n    return this[0].getHours();\r\n  },\r\n  HH: function () {\r\n    return this.toDouble(this.H());\r\n  },\r\n  h: function () {\r\n    var hour = this.H();\r\n    return hour == 0 ? 12 : hour;\r\n  },\r\n  hh: function () {\r\n    return this.toDouble(this.h());\r\n  },\r\n  m: function () {\r\n    return this[0].getMinutes();\r\n  },\r\n  mm: function () {\r\n    return this.toDouble(this.m());\r\n  },\r\n  s: function () {\r\n    return this[0].getSeconds();\r\n  },\r\n  ss: function () {\r\n    return this.toDouble(this.s());\r\n  },\r\n  SSS: function () {\r\n    return this[0].getMilliseconds();\r\n  },\r\n  SS: function () {\r\n    return parseInt(this.SSS() / 10);\r\n  },\r\n  S: function () {\r\n    return parseInt(this.SS() / 10);\r\n  },\r\n  A: function () {\r\n    var hm = this.H() * 100 + this.m();\r\n    if (hm < 600) {\r\n      return '凌晨';\r\n    } else if (hm < 900) {\r\n      return '早上';\r\n    } else if (hm < 1130) {\r\n      return '上午';\r\n    } else if (hm < 1230) {\r\n      return '中午';\r\n    } else if (hm < 1800) {\r\n      return '下午';\r\n    } else {\r\n      return '晚上';\r\n    }\r\n  },\r\n  a: function () {\r\n    return this.A();\r\n  },\r\n  x: function () {\r\n    return this[0].getTime();\r\n  },\r\n  X: function () {\r\n    return parseInt(this.x() / 1000);\r\n  }\r\n};\r\n\r\nTimeFormater.fn.init.prototype = TimeFormater.fn;\r\n\r\nmodule.exports = TimeFormater;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/time-formater/timeformater.js\n// module id = 25\n// module chunks = 0","import mongoose from 'mongoose';\n\nconst types = ['user_id'];\nconst idsSchema = new mongoose.Schema({\n  // food_id: Number,\n  // order_id: Number,\n  // address_id: Number,\n  // cart_id: Number,\n  // img_id: Number,\n  // category_id: Number,\n  // item_id: Number,\n  // sku_id: Number,\n  // admin_id: Number,\n  user_id: Number\n});\n\nconst Ids = mongoose.model('Ids', idsSchema);\nIds.findOne((err, data) => {\n  if (err) throw Error(err);\n  if (!data) {\n    const newIds = new Ids({\n      user_id: 0\n    });\n    newIds.save();\n  }\n});\nexport async function getId (type) {\n  if (!types.includes(type)) {\n    console.log('类型错误');\n    return;\n  }\n  try {\n    const id = await Ids.findOne();\n    id[type]++;\n    await id.save();\n    return id[type];\n  } catch (error) {\n    console.log('获取Id失败：' + error);\n  }\n}\nexport default Ids;\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/ids.js","import { Router } from 'express';\nimport userRoutes from './users/routes';\n\nconst router = Router();\n\nrouter.use('/user', userRoutes);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/admin/index.js","import { Router } from 'express';\nimport { logIn, logOut, getUserCounts, getUserLists } from './controllers';\n\nconst router = Router();\n\nrouter.post('/login', logIn.post);\nrouter.post('/logout', logOut.post);\n\nrouter.get('/counts', getUserCounts);\nrouter.get('/lists', getUserLists);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/admin/users/routes.js","import bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\nimport dtime from 'time-formater';\nimport { randId } from '../../../utils/index';\nimport Admin from './models';\nimport User from '../../users/models';\n// import config from '../../config/default';\n\nexport const register = {\n  async post (req, res) {\n    try {\n      let { username, password } = req.body;\n      let createAt = dtime().format('YYYY-MM-DD HH:mm');\n      let newPassword = await bcrypt.hash(password, 10);\n      let newUser = new Admin({ username, newPassword, createAt });\n      let savedUser = await newUser.save();\n      console.log('用户注册成功');\n      res.status(200).json({\n        message: `Thanks for signing up, ${savedUser.username}!`\n      });\n    } catch (error) {\n      console.error('用户注册失败');\n      res.status(400).json({\n        message: '注册失败'\n      });\n    }\n  }\n};\n\nexport const logIn = {\n  async post (req, res) {\n    try {\n      let { username, password } = req.body;\n      let user = await Admin.findOne({ username });\n      console.log(user);\n      if (user) {\n        let passwordHash = user.password;\n        let matched = await bcrypt.compare(password, passwordHash);\n        if (matched) {\n          res.status(200).json({\n            message: '登录成功',\n            user\n          });\n        } else {\n          res.status(401).json({\n            message: '用户名或者密码不正确'\n          });\n        }\n      } else {\n        res.status(401).json({\n          message: '用户名不存在'\n        });\n      }\n    } catch (error) {\n      console.error('用户登录失败');\n      res.status(400).json({\n        message: '登录失败'\n      });\n    }\n  }\n};\n\nexport const logOut = {\n  async post (req, res) {\n    try {\n      res.status(200).json({\n        message: 'Sign out successful. Good bye! :)'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n};\n\nexport async function getUserCounts (req, res) {\n  try {\n    const count = await User.count();\n    res.status(200).json({\n      count\n    });\n  } catch (error) {\n    res.status(503).json({\n      message: '获取用户数量失败'\n    });\n  }\n}\n\nexport async function getUserLists (req, res) {\n  const { offset = 0, limit = 20 } = req.query;\n  try {\n    const users = await User.find({}).sort({user_id: -1}).limit(Number(limit)).skip(Number(offset));\n    res.status(200).json({\n      users\n    });\n  } catch (error) {\n    res.status(503).json({\n      message: '获取用户列表失败'\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/admin/users/controllers.js","import mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nconst adminSchema = new Schema({\n  id: Number,\n  username: String,\n  password: String,\n  createAt: String,\n  avatar: String\n});\n\nconst Admin = mongoose.model('Admin', adminSchema);\n\nexport default Admin;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/admin/users/models.js"],"sourceRoot":""}